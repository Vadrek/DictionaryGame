(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{2379:function(e,t,n){Promise.resolve().then(n.bind(n,4796))},4796:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(7437),i=n(2265),s=n(4892),r=n.n(s),l=n(8624),c=n(4036);function o(){let e=(0,c.h)(),[t,n]=(0,i.useState)(!1),[s,o]=(0,i.useState)(""),[_,h]=(0,i.useState)(!1),[u,d]=(0,i.useState)(""),m=()=>{""!==s&&""!==u?(console.log(s,"userName",u,"roomId"),e.emit("join_room",u),h(!0),setTimeout(()=>{n(!0),h(!1)},4e3)):alert("Please fill in Username and Room Id")};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:r().main_div,style:{display:t?"none":""},children:[(0,a.jsx)("input",{className:r().main_input,type:"text",placeholder:"Username",onChange:e=>o(e.target.value),disabled:_}),(0,a.jsx)("input",{className:r().main_input,type:"text",placeholder:"room id",onChange:e=>d(e.target.value),disabled:_}),(0,a.jsx)("button",{className:r().main_button,onClick:()=>m(),children:_?(0,a.jsx)("div",{className:r().loading_spinner}):"Join"})]}),(0,a.jsx)("div",{style:{display:t?"":"none"},children:(0,a.jsx)(l.J,{socket:e,roomId:u,username:s})})]})}},8624:function(e,t,n){"use strict";n.d(t,{J:function(){return l}});var a=n(7437),i=n(2265),s=n(8210),r=n.n(s);let l=e=>{let{socket:t,username:n,roomId:s}=e,[l,c]=(0,i.useState)(""),[o,_]=(0,i.useState)([]),h=async e=>{if(e.preventDefault(),""!==l){let e={roomId:s,user:n,msg:l,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};await t.emit("send_msg",e),c("")}};return(0,i.useEffect)(()=>{t.on("receive_msg",e=>{_(t=>[...t,e])})},[t]),(0,a.jsx)("div",{className:r().chat_div,children:(0,a.jsxs)("div",{className:r().chat_border,children:[(0,a.jsx)("div",{style:{marginBottom:"1rem"},children:(0,a.jsxs)("p",{children:["Name: ",(0,a.jsx)("b",{children:n})," and Room Id: ",(0,a.jsx)("b",{children:s})]})}),(0,a.jsx)("div",{children:o.map((e,t)=>{let{roomId:i,user:s,msg:l,time:c}=e;return(0,a.jsxs)("div",{className:s==n?r().chatProfileRight:r().chatProfileLeft,children:[(0,a.jsx)("span",{className:r().chatProfileSpan,style:{textAlign:s==n?"right":"left"},children:s.charAt(0)}),(0,a.jsx)("h3",{style:{textAlign:s==n?"right":"left"},children:l})]},t)})}),(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:e=>h(e),children:[(0,a.jsx)("input",{className:r().chat_input,type:"text",value:l,placeholder:"Type your message..",onChange:e=>c(e.target.value)}),(0,a.jsx)("button",{className:r().chat_button,children:"Send"})]})})]})})}},4036:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var a=n(3388),i=n(2601);let s=null,r=()=>{if(!s){let e=i.env.NEXT_PUBLIC_API_URL||"http://localhost:9000";s=(0,a.io)(e)}return s}},4892:function(e){e.exports={main_div:"page_main_div__fPGCR",main_input:"page_main_input__3FOHD",main_button:"page_main_button__u0ihb",loading_spinner:"page_loading_spinner__Plolh",spin:"page_spin__IAuw_"}},8210:function(e){e.exports={chat_div:"chat_chat_div__Zu1c0",chat_border:"chat_chat_border__S7_8O",chat_input:"chat_chat_input__DIK9G",chat_button:"chat_chat_button__rmRsE",chatProfileRight:"chat_chatProfileRight__HXjNE",chatProfileLeft:"chat_chatProfileLeft__hzxG5",chatProfileSpan:"chat_chatProfileSpan__d5ECm"}}},function(e){e.O(0,[927,971,596,744],function(){return e(e.s=2379)}),_N_E=e.O()}]);